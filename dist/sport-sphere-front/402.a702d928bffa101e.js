"use strict";(self.webpackChunkSportSphereFront=self.webpackChunkSportSphereFront||[]).push([[402],{2786:(I,S,p)=>{p.d(S,{F:()=>e});var h=p(7579);const i={now:()=>(i.delegate||Date).now(),delegate:void 0};class f extends h.x{constructor(d=1/0,g=1/0,c=i){super(),this._bufferSize=d,this._windowTime=g,this._timestampProvider=c,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=g===1/0,this._bufferSize=Math.max(1,d),this._windowTime=Math.max(1,g)}next(d){const{isStopped:g,_buffer:c,_infiniteTimeWindow:w,_timestampProvider:v,_windowTime:b}=this;g||(c.push(d),!w&&c.push(v.now()+b)),this._trimBuffer(),super.next(d)}_subscribe(d){this._throwIfClosed(),this._trimBuffer();const g=this._innerSubscribe(d),{_infiniteTimeWindow:c,_buffer:w}=this,v=w.slice();for(let b=0;b<v.length&&!d.closed;b+=c?1:2)d.next(v[b]);return this._checkFinalizedStatuses(d),g}_trimBuffer(){const{_bufferSize:d,_timestampProvider:g,_buffer:c,_infiniteTimeWindow:w}=this,v=(w?1:2)*d;if(d<1/0&&v<c.length&&c.splice(0,c.length-v),!w){const b=g.now();let T=0;for(let x=1;x<c.length&&c[x]<=b;x+=2)T=x;T&&c.splice(0,T+1)}}}var m=p(1223);let e=(()=>{class _{constructor(){this.workCompletedSource=new f(1),this.workCompleted$=this.workCompletedSource.asObservable()}notifyWorkDone(){console.log("[SharedService] work completed event emitted"),this.workCompletedSource.next()}}return _.\u0275fac=function(g){return new(g||_)},_.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},2402:(I,S,p)=>{p.r(S),p.d(S,{AuthModule:()=>Ze});var h=p(9808),i=p(2382),f=p(8619),m=p(1777),e=p(1223),_=p(263),d=p(2786),g=p(8538);let c=(()=>{class o{constructor(){this.text="Click Me",this.type="button",this.color="#0066ff",this.size="",this.disabled=!1}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-pri-button"]],inputs:{text:"text",type:"type",color:"color",size:"size",disabled:"disabled"},decls:2,vars:9,consts:[[3,"disabled"]],template:function(t,r){1&t&&(e.TgZ(0,"button",0),e._uU(1),e.qZA()),2&t&&(e.Jzz("background-color: ",r.color,"; color:white;"),e.Gre("btn  btn-",r.size," px-5 mt-2"),e.Q6J("disabled",r.disabled),e.uIk("type",r.type),e.xp6(1),e.hij(" ",r.text,"\n"))},styles:["button[_ngcontent-%COMP%]{border-radius:8px}"]}),o})();function w(o,s){if(1&o&&(e.TgZ(0,"div",27),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorMessage," ")}}function v(o,s){if(1&o&&(e.TgZ(0,"div",28),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.successMessage," ")}}function b(o,s){1&o&&(e.TgZ(0,"span",29),e._uU(1," Email is required "),e.qZA())}function T(o,s){1&o&&(e.TgZ(0,"span",29),e._uU(1," Enter a valid email address "),e.qZA())}function x(o,s){1&o&&(e.TgZ(0,"span",29),e._uU(1," Password is required "),e.qZA())}function k(o,s){1&o&&(e.TgZ(0,"span",29),e._uU(1," Password must be at least 8 characters "),e.qZA())}function M(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"app-pri-button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw().resendVerificationMail()}),e.qZA()}}let J=(()=>{class o{constructor(t,r,n,l,a){this.fb=t,this.router=r,this.auth=n,this.sharedService=l,this.tokenService=a,this.errorMessage=null,this.successMessage=null,this.form=this.fb.group({email:["",[i.kI.required,i.kI.email]],password:["",[i.kI.required,i.kI.minLength(8)]],rememberMe:[!1,[i.kI.nullValidator]]}),this.showPassword=!1,this.isEmailNeedToVerify=!1}ngOnInit(){}togglePassword(){this.showPassword=!this.showPassword}forgetPassword(){console.log("test forget pass"),this.router.navigate(["/auth/forgot-password"])}resendVerificationMail(){var t;const r=null===(t=this.form.get("email"))||void 0===t?void 0:t.value;!r||this.auth.resendEmailVerification(r).subscribe({next:n=>{n.success?(this.successMessage=n.message||"Verification email sent",setTimeout(()=>this.successMessage=null,5e3)):(this.errorMessage=n.message||"Failed to resend verification email",setTimeout(()=>this.errorMessage=null,5e3))},error:n=>{var l;this.errorMessage=(null===(l=n.error)||void 0===l?void 0:l.message)||"Failed to resend verification email",setTimeout(()=>this.errorMessage=null,5e3)}})}finishWork(){console.log("Component A finished"),this.sharedService.notifyWorkDone()}submit(){this.form.invalid?this.form.markAllAsTouched():this.auth.login(this.form.value).subscribe({next:t=>{if(console.log("Login response:",t),t.success){this.isEmailNeedToVerify=!1,this.auth.setToken(t.data.token,this.form.value.rememberMe||!1);const r=setInterval(()=>{null!=this.auth.getToken()&&null!=this.tokenService.getUserId()&&(console.log("Now logged in, continue"),this.router.navigate(["/home"]),clearInterval(r))},500)}else this.errorMessage=t.message||"Registration failed","AccountNotActivated"==t.errorCode&&(console.log("Login response errorCode: inside if",t.errorCode),this.isEmailNeedToVerify=!0),setTimeout(()=>{this.errorMessage=null},5e3)},error:t=>{var r;this.errorMessage=(null===(r=t.error)||void 0===r?void 0:r.message)||"Login failed"}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.qu),e.Y36(f.F0),e.Y36(_.e),e.Y36(d.F),e.Y36(g.B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:41,vars:11,consts:[[1,"gradient-custom","h-100"],[1,"container","py-5","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-12","col-md-8","col-lg-6","col-xl-5"],[1,"card",2,"border-radius","1rem"],[1,"card-body","p-5","text-center"],[1,"mb-md-2","mt-md-1","pb-5"],[1,"fw-bold","mb-5","text-uppercase"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-success mt-3",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group","d-flex","flex-column","mb-4"],["for","email",1,"text-start"],["formControlName","email","placeholder","E-mail","id","email",1,"form-control","form-control-lg"],["class","text-danger",4,"ngIf"],["for","password",1,"text-start"],[1,"position-relative"],["formControlName","password","id","password","placeholder","Password",1,"form-control","form-control-lg",3,"type"],[1,"position-absolute","top-50","end-0","translate-middle-y","me-3",2,"cursor","pointer",3,"ngClass","click"],[1,"checkbox","mb-5","align-items-start","align-content-start","d-flex","flex-column","mb-2"],["formControlName","rememberMe","id","rememberMe","type","checkbox","value","rememberMe"],[1,"small","mb-3","pb-lg-2"],[1,"text-white-50","pointer-event",2,"cursor","pointer",3,"click"],["text","Login","size","lg","type","submit"],["text","Resend verification main","size","sm","color","red","class","mt-2",3,"click",4,"ngIf"],[1,"mb-0"],["routerLink","../register",1,"text-black","fw-bold"],[1,"alert","alert-danger","mt-3"],[1,"alert","alert-success","mt-3"],[1,"text-danger"],["text","Resend verification main","size","sm","color","red",1,"mt-2",3,"click"]],template:function(t,r){if(1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),e._uU(8,"Login"),e.qZA(),e.YNc(9,w,2,1,"div",8),e.YNc(10,v,2,1,"div",9),e.TgZ(11,"form",10),e.NdJ("ngSubmit",function(){return r.submit()}),e.TgZ(12,"div",11)(13,"label",12),e._uU(14,"Email address"),e.qZA(),e._UZ(15,"input",13),e.YNc(16,b,2,0,"span",14),e.YNc(17,T,2,0,"span",14),e.qZA(),e.TgZ(18,"div",11)(19,"label",15),e._uU(20,"Password"),e.qZA(),e.TgZ(21,"div",16),e._UZ(22,"input",17),e.TgZ(23,"i",18),e.NdJ("click",function(){return r.togglePassword()}),e.qZA()(),e.YNc(24,x,2,0,"span",14),e.YNc(25,k,2,0,"span",14),e.qZA(),e.TgZ(26,"div",19)(27,"label"),e._UZ(28,"input",20),e._uU(29," Remember Me. "),e.qZA()(),e.TgZ(30,"p",21)(31,"a",22),e.NdJ("click",function(){return r.forgetPassword()}),e._uU(32,"Forgot password?"),e.qZA()(),e._UZ(33,"app-pri-button",23)(34,"br"),e.YNc(35,M,1,0,"app-pri-button",24),e.qZA()(),e.TgZ(36,"div")(37,"p",25),e._uU(38,"Don't have an account? "),e.TgZ(39,"a",26),e._uU(40,"Sign Up"),e.qZA()()()()()()()()()),2&t){let n,l,a,u;e.xp6(9),e.Q6J("ngIf",r.errorMessage),e.xp6(1),e.Q6J("ngIf",r.successMessage),e.xp6(1),e.Q6J("formGroup",r.form)("@stepTransition",void 0),e.xp6(5),e.Q6J("ngIf",(null==(n=r.form.get("email"))?null:n.touched)&&(null==(n=r.form.get("email"))||null==n.errors?null:n.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==(l=r.form.get("email"))?null:l.touched)&&(null==(l=r.form.get("email"))||null==l.errors?null:l.errors.email)),e.xp6(5),e.Q6J("type",r.showPassword?"text":"password"),e.xp6(1),e.Q6J("ngClass",r.showPassword?"fa-eye-slash":"fa-eye"),e.xp6(1),e.Q6J("ngIf",(null==(a=r.form.get("password"))?null:a.touched)&&(null==(a=r.form.get("password"))||null==a.errors?null:a.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==(u=r.form.get("password"))?null:u.touched)&&(null==(u=r.form.get("password"))||null==u.errors?null:u.errors.minlength)),e.xp6(10),e.Q6J("ngIf",r.isEmailNeedToVerify)}},directives:[h.O5,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,h.mk,i.Wl,c,f.yS],styles:[""],data:{animation:[(0,m.X$)("stepTransition",[(0,m.eR)(":enter",[(0,m.oB)({opacity:0,transform:"translateX(50px)"}),(0,m.jt)("400ms ease-out",(0,m.oB)({opacity:1,transform:"translateX(0)"}))]),(0,m.eR)(":leave",[(0,m.jt)("400ms ease-in",(0,m.oB)({opacity:0,transform:"translateX(-50px)"}))])])]}}),o})();var P=p(4289),F=p(3846);function R(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().previousStep()}),e._UZ(1,"i",17),e.qZA()}}function Y(o,s){if(1&o&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorMessage," ")}}function Q(o,s){if(1&o&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.successMessage," ")}}function L(o,s){1&o&&(e.TgZ(0,"span",39),e._uU(1," Full name is required "),e.qZA())}function j(o,s){1&o&&(e.TgZ(0,"span",39),e._uU(1," Email is required "),e.qZA())}function B(o,s){1&o&&(e.TgZ(0,"span",39),e._uU(1," Enter a valid email address "),e.qZA())}function O(o,s){1&o&&(e.TgZ(0,"span",39),e._uU(1," Gender is required "),e.qZA())}function E(o,s){1&o&&(e.TgZ(0,"span",39),e._uU(1," Date of Birth is required "),e.qZA())}function z(o,s){1&o&&(e.TgZ(0,"span",39),e._uU(1," Phone number must be a valid mobile number format, e.g. +201234567890 or 01234567890 "),e.qZA())}function D(o,s){1&o&&(e.TgZ(0,"span",39),e._uU(1," Phone number Date of Birth is required "),e.qZA())}function V(o,s){1&o&&(e.TgZ(0,"span",39),e._uU(1," Password is required "),e.qZA())}function X(o,s){1&o&&(e.TgZ(0,"span",39),e._uU(1," Password must be at least 8 characters "),e.qZA())}function G(o,s){1&o&&(e.TgZ(0,"span",39),e._uU(1," Confirm Password is required "),e.qZA())}function $(o,s){1&o&&(e.TgZ(0,"span",39),e._uU(1," Passwords do not match "),e.qZA())}function W(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"form",20)(1,"div",21)(2,"label",22),e._uU(3,"Full Name"),e.qZA(),e._UZ(4,"input",23),e.YNc(5,L,2,0,"span",24),e.qZA(),e.TgZ(6,"div",21)(7,"label",25),e._uU(8,"Email address"),e.qZA(),e._UZ(9,"input",26),e.YNc(10,j,2,0,"span",24),e.YNc(11,B,2,0,"span",24),e.qZA(),e.TgZ(12,"div",21)(13,"label",27),e._uU(14,"Gender"),e.qZA(),e.TgZ(15,"select",28)(16,"option",29),e._uU(17,"Male"),e.qZA(),e.TgZ(18,"option",29),e._uU(19,"Female"),e.qZA(),e.TgZ(20,"option",29),e._uU(21,"Other"),e.qZA()(),e.YNc(22,O,2,0,"span",24),e.qZA(),e.TgZ(23,"div",21)(24,"label",30),e._uU(25,"Date of Birth"),e.qZA(),e._UZ(26,"input",31),e.YNc(27,E,2,0,"span",24),e.qZA(),e.TgZ(28,"div",21)(29,"label",32),e._uU(30,"Phone Number"),e.qZA(),e._UZ(31,"input",33),e.YNc(32,z,2,0,"span",24),e.YNc(33,D,2,0,"span",24),e.qZA(),e.TgZ(34,"div",21)(35,"label",34),e._uU(36,"Password"),e.qZA(),e._UZ(37,"input",35),e.YNc(38,V,2,0,"span",24),e.YNc(39,X,2,0,"span",24),e.qZA(),e.TgZ(40,"div",21)(41,"label",36),e._uU(42,"Confirm Password"),e.qZA(),e._UZ(43,"input",37),e.YNc(44,G,2,0,"span",24),e.YNc(45,$,2,0,"span",24),e.qZA(),e.TgZ(46,"button",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().nextStep()}),e._uU(47,"Next"),e.qZA()()}if(2&o){const t=e.oxw();let r,n,l,a,u,Z,C,A,y,q,N;e.Q6J("formGroup",t.formStep1)("@stepTransition",void 0),e.xp6(5),e.Q6J("ngIf",(null==(r=t.formStep1.get("fullName"))?null:r.touched)&&(null==(r=t.formStep1.get("fullName"))||null==r.errors?null:r.errors.required)),e.xp6(5),e.Q6J("ngIf",(null==(n=t.formStep1.get("email"))?null:n.touched)&&(null==(n=t.formStep1.get("email"))||null==n.errors?null:n.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==(l=t.formStep1.get("email"))?null:l.touched)&&(null==(l=t.formStep1.get("email"))||null==l.errors?null:l.errors.email)),e.xp6(5),e.Q6J("ngValue",t.genders.Male),e.xp6(2),e.Q6J("ngValue",t.genders.Female),e.xp6(2),e.Q6J("ngValue",t.genders.Other),e.xp6(2),e.Q6J("ngIf",(null==(a=t.formStep1.get("gender"))?null:a.touched)&&(null==(a=t.formStep1.get("gender"))||null==a.errors?null:a.errors.required)),e.xp6(5),e.Q6J("ngIf",(null==(u=t.formStep1.get("dateOfBirth"))?null:u.touched)&&(null==(u=t.formStep1.get("dateOfBirth"))||null==u.errors?null:u.errors.required)),e.xp6(5),e.Q6J("ngIf",(null==(Z=t.formStep1.get("phoneNumber"))?null:Z.touched)&&(null==(Z=t.formStep1.get("phoneNumber"))||null==Z.errors?null:Z.errors.pattern)),e.xp6(1),e.Q6J("ngIf",(null==(C=t.formStep1.get("phoneNumber"))?null:C.touched)&&(null==(C=t.formStep1.get("phoneNumber"))||null==C.errors?null:C.errors.required)),e.xp6(5),e.Q6J("ngIf",(null==(A=t.formStep1.get("password"))?null:A.touched)&&(null==(A=t.formStep1.get("password"))||null==A.errors?null:A.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==(y=t.formStep1.get("password"))?null:y.touched)&&(null==(y=t.formStep1.get("password"))||null==y.errors?null:y.errors.minlength)),e.xp6(5),e.Q6J("ngIf",(null==(q=t.formStep1.get("confirmPassword"))?null:q.touched)&&(null==(q=t.formStep1.get("confirmPassword"))||null==q.errors?null:q.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==t.formStep1.errors?null:t.formStep1.errors.mismatch)&&(null==(N=t.formStep1.get("confirmPassword"))?null:N.touched))}}function H(o,s){if(1&o&&(e.TgZ(0,"option",29),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",t.name," ")}}function K(o,s){if(1&o&&(e.TgZ(0,"option",29),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",t.name," ")}}function ee(o,s){1&o&&(e.TgZ(0,"span",39),e._uU(1," Role is required "),e.qZA())}function te(o,s){1&o&&(e.TgZ(0,"div")(1,"div",21)(2,"label",58),e._uU(3,"Sport"),e.qZA(),e._UZ(4,"input",59),e.qZA(),e.TgZ(5,"div",21)(6,"label",60),e._uU(7,"Position"),e.qZA(),e._UZ(8,"input",61),e.qZA(),e.TgZ(9,"div",21)(10,"label",62),e._uU(11,"Height (cm)"),e.qZA(),e._UZ(12,"input",63),e.qZA(),e.TgZ(13,"div",21)(14,"label",64),e._uU(15,"Weight (kg)"),e.qZA(),e._UZ(16,"input",65),e.qZA()())}function oe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"form",40),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().submitFinal()}),e.TgZ(1,"div",21)(2,"label",41),e._uU(3,"Bio"),e.qZA(),e._UZ(4,"input",42),e.qZA(),e.TgZ(5,"div",21)(6,"label",43),e._uU(7,"Country"),e.qZA(),e.TgZ(8,"select",44)(9,"option",45),e._uU(10,"Select a country"),e.qZA(),e.YNc(11,H,2,2,"option",46),e.qZA()(),e.TgZ(12,"div",21)(13,"label",47),e._uU(14,"City"),e.qZA(),e.TgZ(15,"select",48)(16,"option",49),e._uU(17,"Select a city"),e.qZA(),e.YNc(18,K,2,2,"option",46),e.qZA()(),e.TgZ(19,"div",21)(20,"label",50),e._uU(21,"Role"),e.qZA(),e.TgZ(22,"select",51)(23,"option",52),e._uU(24,"Athlete"),e.qZA(),e.TgZ(25,"option",52),e._uU(26,"Coach"),e.qZA(),e.TgZ(27,"option",52),e._uU(28,"Fan"),e.qZA(),e.TgZ(29,"option",52),e._uU(30,"Scout"),e.qZA()(),e.YNc(31,ee,2,0,"span",24),e.qZA(),e.YNc(32,te,17,0,"div",53),e.TgZ(33,"div",21)(34,"label",54),e._uU(35,"Profile Picture"),e.qZA(),e.TgZ(36,"input",55),e.NdJ("change",function(n){return e.CHM(t),e.oxw().onFileSelected(n)}),e.qZA()(),e.TgZ(37,"button",56),e.NdJ("click",function(){return e.CHM(t),e.oxw().test()}),e._uU(38,"asd"),e.qZA(),e._UZ(39,"app-pri-button",57),e.qZA()}if(2&o){const t=e.oxw();let r;e.Q6J("formGroup",t.formStep2)("@stepTransition",void 0),e.xp6(11),e.Q6J("ngForOf",t.countries),e.xp6(7),e.Q6J("ngForOf",t.cities),e.xp6(5),e.Q6J("value",t.roles.Athlete),e.xp6(2),e.Q6J("value",t.roles.Coach),e.xp6(2),e.Q6J("value",t.roles.Fan),e.xp6(2),e.Q6J("value",t.roles.Scout),e.xp6(2),e.Q6J("ngIf",(null==(r=t.formStep2.get("role"))?null:r.touched)&&(null==(r=t.formStep2.get("role"))||null==r.errors?null:r.errors.required)),e.xp6(1),e.Q6J("ngIf",t.isAthlete())}}let re=(()=>{class o{constructor(t,r,n,l){this.fb=t,this.auth=r,this.router=n,this.lookupsService=l,this.roles=P.vX,this.genders=P.dn,this.errorMessage=null,this.successMessage=null,this.countries=[],this.cities=[],this.step=1,this.formStep1=this.fb.group({fullName:["",i.kI.required],email:["",[i.kI.required,i.kI.email]],gender:["",i.kI.required],dateOfBirth:["",i.kI.required],phoneNumber:["",[i.kI.required,i.kI.pattern(/^(\+20|0)?1[0-9]{9}$/)]],password:["",[i.kI.required,i.kI.minLength(8)]],confirmPassword:["",i.kI.required]},{validators:this.passwordMatchValidator}),this.formStep2=this.fb.group({role:["",i.kI.required],bio:[""],country:[""],city:[""],sport:[""],position:[""],heightCm:[""],weightKg:[""],file:[null]})}ngOnInit(){this.getCountries(),this.watchCountryChange()}passwordMatchValidator(t){var r,n;return(null===(r=t.get("password"))||void 0===r?void 0:r.value)===(null===(n=t.get("confirmPassword"))||void 0===n?void 0:n.value)?null:{mismatch:!0}}nextStep(){this.formStep1.invalid?this.formStep1.markAllAsTouched():this.step=2}previousStep(){this.step=1}onFileSelected(t){const r=t.target.files[0];r&&this.formStep2.patchValue({file:r})}isAthlete(){var t,r,n;return console.log(null===(t=this.formStep2.get("role"))||void 0===t?void 0:t.value),console.log((null===(r=this.formStep2.get("role"))||void 0===r?void 0:r.value)===String(this.roles.Athlete)),(null===(n=this.formStep2.get("role"))||void 0===n?void 0:n.value)===String(this.roles.Athlete)}submitFinal(){var t,r;if(this.formStep1.invalid)return this.formStep1.markAllAsTouched(),void(this.step=1);if(this.formStep2.invalid)return this.formStep2.markAllAsTouched(),void(this.step=2);const n=new FormData,l=Object.assign({},this.formStep1.value);n.append("RegisterData.FullName",l.fullName),n.append("RegisterData.Email",l.email),n.append("RegisterData.Role",null===(t=this.formStep2.get("role"))||void 0===t?void 0:t.value),n.append("RegisterData.Gender",null===(r=this.formStep1.get("gender"))||void 0===r?void 0:r.value),n.append("RegisterData.DateOfBirth",l.dateOfBirth),l.phoneNumber&&n.append("RegisterData.PhoneNumber",l.phoneNumber),n.append("RegisterData.Password",l.password),n.append("RegisterData.ConfirmPassword",l.confirmPassword);const a=Object.assign({},this.formStep2.value);delete a.role,delete a.file,delete a.city,delete a.country,n.append("Profile.city",this.formStep2.value.city.name),n.append("Profile.country",this.formStep2.value.country.name);for(const u in a)a[u]&&n.append(`Profile.${u}`,a[u]);this.formStep2.value.file&&n.append("File",this.formStep2.value.file),this.auth.registerFormData(n).subscribe({next:u=>{u.success?(this.successMessage=u.message||"Registration complete",setTimeout(()=>{this.successMessage=null},5e3),console.log("Registration complete",u),this.router.navigate(["/auth/login"])):(this.errorMessage=u.message||"Registration failed",setTimeout(()=>{this.errorMessage=null},5e3))},error:u=>{var Z;console.error("Registration failed",u),this.errorMessage=(null===(Z=u.error)||void 0===Z?void 0:Z.message)||"Registration failed"}})}getCountries(){this.lookupsService.getCountries().subscribe(t=>{console.log(t.data),this.countries=t.data})}onCountryChange(t){console.log("from on change "+t),t?this.lookupsService.getCities(t).subscribe(r=>{this.cities=r.data}):this.cities=[]}watchCountryChange(){var t;null===(t=this.formStep2.get("country"))||void 0===t||t.valueChanges.subscribe(r=>{var n;console.log("test + "),console.log(r.name),r?this.lookupsService.getCities(r.countryId).subscribe(l=>{var a;console.log(l),this.cities=l.data,null===(a=this.formStep2.get("city"))||void 0===a||a.reset()}):(this.cities=[],null===(n=this.formStep2.get("city"))||void 0===n||n.reset())})}test(){console.log(this.formStep2.value.city.name)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.qu),e.Y36(_.e),e.Y36(f.F0),e.Y36(F.K))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-register"]],decls:19,vars:5,consts:[[1,"gradient-custom","h-100"],[1,"container","py-5","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-12","col-md-8","col-lg-6","col-xl-5"],[1,"card",2,"border-radius","1rem"],[1,"card-body","p-5","text-center"],[1,"position-relative","text-center","mb-5"],[1,"fw-bold","text-uppercase","m-0"],["type","button","class","btn  text-black position-absolute start-0 top-50 translate-middle-y","style","background-color: rgb(199, 198, 198);",3,"click",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-success mt-3",4,"ngIf"],[3,"formGroup",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"mt-4"],[1,"mb-0"],["routerLink","../login",1,"text-black","fw-bold"],["type","button",1,"btn","text-black","position-absolute","start-0","top-50","translate-middle-y",2,"background-color","rgb(199, 198, 198)",3,"click"],[1,"fa-solid","fa-angle-left","fw-bold"],[1,"alert","alert-danger","mt-3"],[1,"alert","alert-success","mt-3"],[3,"formGroup"],[1,"form-group","d-flex","flex-column","mb-4"],["for","fullName",1,"text-start"],["id","fullName","formControlName","fullName","type","text","placeholder","Full Name",1,"form-control","form-control-lg"],["class","text-danger",4,"ngIf"],["for","email",1,"text-start"],["id","email","formControlName","email","type","email","placeholder","E-mail",1,"form-control","form-control-lg"],["for","gender",1,"text-start"],["id","gender","formControlName","gender",1,"form-control","form-control-lg"],[3,"ngValue"],["for","dob",1,"text-start"],["id","dob","formControlName","dateOfBirth","type","date",1,"form-control","form-control-lg"],["for","phone",1,"text-start"],["id","phone","formControlName","phoneNumber","type","text","placeholder","Phone Number",1,"form-control","form-control-lg"],["for","password",1,"text-start"],["id","password","formControlName","password","type","password","placeholder","Password",1,"form-control","form-control-lg"],["for","confirmPassword",1,"text-start"],["id","confirmPassword","formControlName","confirmPassword","type","password","placeholder","Confirm Password",1,"form-control","form-control-lg"],["type","button",1,"btn","btn-primary",3,"click"],[1,"text-danger"],[3,"formGroup","ngSubmit"],["for","bio",1,"text-start"],["id","bio","formControlName","bio","type","text",1,"form-control","form-control-lg"],["for","country",1,"text-start"],["formControlName","country","id","country",1,"form-control","form-control-lg"],["value","","disabled",""],[3,"ngValue",4,"ngFor","ngForOf"],["for","city",1,"text-start"],["formControlName","city","id","city",1,"form-control","form-control-lg"],["value","","disabled","","selected",""],["for","role",1,"text-start"],["id","role","formControlName","role",1,"form-control","form-control-lg"],[3,"value"],[4,"ngIf"],["for","file",1,"text-start"],["id","file","type","file",1,"form-control","form-control-lg",3,"change"],[3,"click"],["text","Register","size","lg","type","submit"],["for","sport",1,"text-start"],["id","sport","formControlName","sport","type","text",1,"form-control","form-control-lg"],["for","position",1,"text-start"],["id","position","formControlName","position","type","text",1,"form-control","form-control-lg"],["for","heightCm",1,"text-start"],["id","heightCm","formControlName","heightCm","type","number",1,"form-control","form-control-lg"],["for","weightKg",1,"text-start"],["id","weightKg","formControlName","weightKg","type","number",1,"form-control","form-control-lg"]],template:function(t,r){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),e._uU(8,"Register"),e.qZA(),e.YNc(9,R,2,0,"button",8),e.qZA(),e.YNc(10,Y,2,1,"div",9),e.YNc(11,Q,2,1,"div",10),e.YNc(12,W,48,16,"form",11),e.YNc(13,oe,40,10,"form",12),e.TgZ(14,"div",13)(15,"p",14),e._uU(16,"Already have an account? "),e.TgZ(17,"a",15),e._uU(18,"Login"),e.qZA()()()()()()()()()),2&t&&(e.xp6(9),e.Q6J("ngIf",2===r.step),e.xp6(1),e.Q6J("ngIf",r.errorMessage),e.xp6(1),e.Q6J("ngIf",r.successMessage),e.xp6(1),e.Q6J("ngIf",1===r.step),e.xp6(1),e.Q6J("ngIf",2===r.step))},directives:[h.O5,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,i.EJ,i.YN,i.Kr,h.sg,i.wV,c,f.yS],styles:[""],data:{animation:[(0,m.X$)("stepTransition",[(0,m.eR)(":enter",[(0,m.oB)({opacity:0,transform:"translateX(50px)"}),(0,m.jt)("400ms ease-out",(0,m.oB)({opacity:1,transform:"translateX(0)"}))]),(0,m.eR)(":leave",[(0,m.jt)("400ms ease-in",(0,m.oB)({opacity:0,transform:"translateX(-50px)"}))])])]}}),o})();function ne(o,s){if(1&o&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorMessage," ")}}function se(o,s){if(1&o&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.successMessage," ")}}function ie(o,s){1&o&&(e.TgZ(0,"span",20),e._uU(1," Email is required "),e.qZA())}function le(o,s){1&o&&(e.TgZ(0,"span",20),e._uU(1," Enter a valid email address "),e.qZA())}let ae=(()=>{class o{constructor(t,r){this.fb=t,this.auth=r,this.errorMessage=null,this.successMessage=null,this.form=this.fb.group({email:["",[i.kI.required,i.kI.email]]})}ngOnInit(){}submit(){var t;this.form.invalid?this.form.markAllAsTouched():this.auth.forgotPassword(null===(t=this.form.get("email"))||void 0===t?void 0:t.value).subscribe({next:r=>{console.log("forgotPassword response:",r),r.success||(this.errorMessage=r.message||"forgotPassword failed","AccountNotActivated"==r.errorCode&&console.log("Login response errorCode: inside if",r.errorCode),setTimeout(()=>{this.errorMessage=null},5e3))},error:r=>{var n;this.errorMessage=(null===(n=r.error)||void 0===n?void 0:n.message)||"forgotPassword failed"}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.qu),e.Y36(_.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-forgot-password"]],decls:25,vars:6,consts:[[1,"gradient-custom","h-100","vh-100"],[1,"container","py-5","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-12","col-md-8","col-lg-6","col-xl-5"],[1,"card","bg-dark","text-white",2,"border-radius","1rem"],[1,"card-body","p-5","text-center"],[1,"mb-md-2","mt-md-1","pb-5"],[1,"fw-bold","mb-5","text-uppercase"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-success mt-3",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group","d-flex","flex-column","mb-4"],["for","email",1,"text-start"],["formControlName","email","placeholder","E-mail","id","email",1,"form-control","form-control-lg"],["class","text-danger",4,"ngIf"],["text","Send forget E-mail","size","lg","type","submit"],[1,"mb-0"],["routerLink","../login",1,"text-white-50","fw-bold"],[1,"alert","alert-danger","mt-3"],[1,"alert","alert-success","mt-3"],[1,"text-danger"]],template:function(t,r){if(1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),e._uU(8,"Forget Password"),e.qZA(),e.YNc(9,ne,2,1,"div",8),e.YNc(10,se,2,1,"div",9),e.TgZ(11,"form",10),e.NdJ("ngSubmit",function(){return r.submit()}),e.TgZ(12,"div",11)(13,"label",12),e._uU(14,"Email address"),e.qZA(),e._UZ(15,"input",13),e.YNc(16,ie,2,0,"span",14),e.YNc(17,le,2,0,"span",14),e.qZA(),e._UZ(18,"app-pri-button",15)(19,"br"),e.qZA()(),e.TgZ(20,"div")(21,"p",16),e._uU(22,"Do you remember you account? "),e.TgZ(23,"a",17),e._uU(24,"Login"),e.qZA()()()()()()()()()),2&t){let n,l;e.xp6(9),e.Q6J("ngIf",r.errorMessage),e.xp6(1),e.Q6J("ngIf",r.successMessage),e.xp6(1),e.Q6J("formGroup",r.form)("@stepTransition",void 0),e.xp6(5),e.Q6J("ngIf",(null==(n=r.form.get("email"))?null:n.touched)&&(null==(n=r.form.get("email"))||null==n.errors?null:n.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==(l=r.form.get("email"))?null:l.touched)&&(null==(l=r.form.get("email"))||null==l.errors?null:l.errors.email))}},directives:[h.O5,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,c,f.yS],styles:[".gradient-custom[_ngcontent-%COMP%]{background:#1c1c1e;background:linear-gradient(to right,#00b4d8,#0077b6)}"]}),o})(),ue=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-auth-footer"]],decls:5,vars:0,consts:[[1,"bg-body-tertiary","text-center","text-lg-start"],[1,"text-center","p-3",2,"background-color","rgba(0, 0, 0, 0.05)"],[1,"text-body"]],template:function(t,r){1&t&&(e.TgZ(0,"footer",0)(1,"div",1),e._uU(2," \xa9 2025 Copyright: "),e.TgZ(3,"a",2),e._uU(4,"Sport Sphere"),e.qZA()()())},styles:[""]}),o})();function ce(o,s){if(1&o&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorMessage," ")}}function pe(o,s){if(1&o&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.successMessage," ")}}function de(o,s){1&o&&(e.TgZ(0,"span",20),e._uU(1," Password is required "),e.qZA())}function fe(o,s){1&o&&(e.TgZ(0,"span",20),e._uU(1," Password must be at least 8 characters "),e.qZA())}function ge(o,s){1&o&&(e.TgZ(0,"span",20),e._uU(1," Confirm Password is required "),e.qZA())}function _e(o,s){1&o&&(e.TgZ(0,"span",20),e._uU(1," Passwords do not match "),e.qZA())}const he=[{path:"",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-auth-layout"]],decls:2,vars:0,template:function(t,r){1&t&&e._UZ(0,"router-outlet")(1,"app-auth-footer")},directives:[f.lC,ue],styles:[""]}),o})(),children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:J},{path:"register",component:re},{path:"forgot-password",component:ae},{path:"reset-password",component:(()=>{class o{constructor(t,r,n,l){this.route=t,this.authService=r,this.fb=n,this.router=l,this.errorMessage=null,this.successMessage=null,this.resetForm=this.fb.group({newPassword:["",[i.kI.required,i.kI.minLength(8)]],confirmPassword:["",i.kI.required]},{validators:this.passwordMatchValidator}),this.route.queryParams.subscribe(a=>{this.email=a.Email,this.token=a.Token})}ngOnInit(){}passwordMatchValidator(t){var r,n;return(null===(r=t.get("newPassword"))||void 0===r?void 0:r.value)===(null===(n=t.get("confirmPassword"))||void 0===n?void 0:n.value)?null:{mismatch:!0}}submit(){if(this.resetForm.invalid)return;const{newPassword:t,confirmPassword:r}=this.resetForm.value;console.log(`email ${this.email} , token ${this.token} , pass ${t} , confPAss ${r}`),this.authService.resetPassword({email:this.email,token:this.token,newPassword:t,newPasswordConfirm:r}).subscribe({next:n=>{n.success?(this.successMessage=n.message||"Password reset successfully",setTimeout(()=>{this.successMessage=null},5e3),this.router.navigate(["/login"])):(this.errorMessage=n.message||"Failed to reset password",setTimeout(()=>{this.errorMessage=null},5e3))},error:n=>{var l;console.error("Failed to reset password",n),this.errorMessage=(null===(l=n.error)||void 0===l?void 0:l.message)||"Failed to reset password"}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.gz),e.Y36(_.e),e.Y36(i.qu),e.Y36(f.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-reset-password"]],decls:26,vars:8,consts:[[1,"gradient-custom","h-100","vh-100"],[1,"container","py-5","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-12","col-md-8","col-lg-6","col-xl-5"],[1,"card","bg-dark","text-white",2,"border-radius","1rem"],[1,"card-body","p-5","text-center"],[1,"mb-md-2","mt-md-1","pb-5"],[1,"fw-bold","mb-5","text-uppercase"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-success mt-3",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group","d-flex","flex-column","mb-4"],["for","newPassword",1,"text-start"],["id","newPassword","formControlName","newPassword","type","password","placeholder","New Password",1,"form-control","form-control-lg"],["class","text-danger",4,"ngIf"],["for","confirmPassword",1,"text-start"],["id","confirmPassword","formControlName","confirmPassword","type","password","placeholder","Confirm Password",1,"form-control","form-control-lg"],["text","Reset Password","size","lg","type","submit"],[1,"alert","alert-danger","mt-3"],[1,"alert","alert-success","mt-3"],[1,"text-danger"]],template:function(t,r){if(1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),e._uU(8,"Forget Password"),e.qZA(),e.YNc(9,ce,2,1,"div",8),e.YNc(10,pe,2,1,"div",9),e.TgZ(11,"form",10),e.NdJ("ngSubmit",function(){return r.submit()}),e.TgZ(12,"div",11)(13,"label",12),e._uU(14,"New Password"),e.qZA(),e._UZ(15,"input",13),e.YNc(16,de,2,0,"span",14),e.YNc(17,fe,2,0,"span",14),e.qZA(),e.TgZ(18,"div",11)(19,"label",15),e._uU(20,"Confirm Password"),e.qZA(),e._UZ(21,"input",16),e.YNc(22,ge,2,0,"span",14),e.YNc(23,_e,2,0,"span",14),e.qZA(),e._UZ(24,"app-pri-button",17)(25,"br"),e.qZA()()()()()()()()),2&t){let n,l,a,u;e.xp6(9),e.Q6J("ngIf",r.errorMessage),e.xp6(1),e.Q6J("ngIf",r.successMessage),e.xp6(1),e.Q6J("formGroup",r.resetForm)("@stepTransition",void 0),e.xp6(5),e.Q6J("ngIf",(null==(n=r.resetForm.get("newPassword"))?null:n.touched)&&(null==(n=r.resetForm.get("newPassword"))||null==n.errors?null:n.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==(l=r.resetForm.get("newPassword"))?null:l.touched)&&(null==(l=r.resetForm.get("newPassword"))||null==l.errors?null:l.errors.minlength)),e.xp6(5),e.Q6J("ngIf",(null==(a=r.resetForm.get("confirmPassword"))?null:a.touched)&&(null==(a=r.resetForm.get("confirmPassword"))||null==a.errors?null:a.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==r.resetForm.errors?null:r.resetForm.errors.mismatch)&&(null==(u=r.resetForm.get("confirmPassword"))?null:u.touched))}},directives:[h.O5,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,c],styles:[".gradient-custom[_ngcontent-%COMP%]{background:#1c1c1e;background:linear-gradient(to right,#00b4d8,#0077b6)}"]}),o})()}]}];let ve=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[f.Bz.forChild(he)],f.Bz]}),o})();var U=p(4466);let be=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[h.ez,f.Bz,U.m]]}),o})(),Ze=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[h.ez,i.UX,ve,be,U.m,i.u5]]}),o})()}}]);